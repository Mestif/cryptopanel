# Обновление версии 1.9.0

## Изменения

### 1. Исправлено отображение в "недавно запущенных"
- ✅ Изменен `LSUIElement` с `true` на `false` в Info.plist
- ✅ Добавлен `LSBackgroundOnly` = `false`
- ✅ Добавлен `NSApp.setActivationPolicy(.accessory)` в AppDelegate
- ✅ Приложение теперь появляется в "недавно запущенных" приложений
- ✅ Иконка не отображается в Dock (accessory policy)

### 2. Добавлена поддержка системного языка
- ✅ Создан файл `LocalizedStrings.swift` для локализации
- ✅ Автоматическое определение языка системы
- ✅ Поддержка русского и английского языков
- ✅ Все строки интерфейса локализованы:
  - Заголовки и подписи
  - Кнопки
  - Сообщения об ошибках
  - Окно About

## Технические детали

### Info.plist
- `LSUIElement`: `false` (было `true`)
- `LSBackgroundOnly`: `false` (добавлено)

### AppDelegate.swift
- Добавлен `NSApp.setActivationPolicy(.accessory)`
- Это скрывает иконку из Dock, но оставляет в недавно запущенных

### LocalizedStrings.swift
- Новый файл для управления локализацией
- Автоматическое определение языка через `Locale.preferredLanguages`
- Поддержка русского (`ru`) и английского (`en`)
- Все строки интерфейса вынесены в локализованные константы

### SettingsView.swift
- Все строки заменены на `LocalizedStrings.*`
- Автоматическое переключение языка в зависимости от системы

## Поддерживаемые языки

### Русский (ru)
- Все строки интерфейса на русском
- Определяется автоматически, если система на русском

### Английский (en)
- Все строки интерфейса на английском
- Используется по умолчанию и для всех других языков

## Как это работает

1. **Определение языка:**
   - Приложение проверяет `Locale.preferredLanguages`
   - Если первый язык начинается с "ru", используется русский
   - Иначе используется английский

2. **Отображение в недавно запущенных:**
   - `LSUIElement = false` позволяет приложению появляться в списке
   - `setActivationPolicy(.accessory)` скрывает иконку из Dock
   - Приложение остается в меню-баре, но также появляется в недавно запущенных

## Файлы

- `Info.plist` - изменен LSUIElement и добавлен LSBackgroundOnly
- `AppDelegate.swift` - добавлен setActivationPolicy
- `LocalizedStrings.swift` - новый файл для локализации
- `SettingsView.swift` - все строки локализованы
- `build.sh` - добавлен LocalizedStrings.swift в сборку

## Использование

### Язык системы
- Приложение автоматически определяет язык системы
- Интерфейс переключается на соответствующий язык
- Не требует дополнительных настроек

### Недавно запущенные
- Приложение теперь появляется в списке недавно запущенных
- Можно быстро переключиться на приложение через Cmd+Tab
- Иконка не отображается в Dock (как и должно быть для меню-бар приложений)

